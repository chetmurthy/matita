(**************************************************************************)
(*       ___                                                              *)
(*      ||M||                                                             *)
(*      ||A||       A project by Andrea Asperti                           *)
(*      ||T||                                                             *)
(*      ||I||       Developers:                                           *)
(*      ||T||         The HELM team.                                      *)
(*      ||A||         http://helm.cs.unibo.it                             *)
(*      \   /                                                             *)
(*       \ /        This file is distributed under the terms of the       *)
(*        v         GNU General Public License Version 2                  *)
(*                                                                        *)
(**************************************************************************)

include "lambda-delta/substitution/drop_defs.ma".

(* DROPPING *****************************************************************)

(* the main properties ******************************************************)

lemma drop_conf_ge: ‚àÄd1,e1,L,L1. ‚Üë[d1, e1] L1 ‚â° L ‚Üí
                    ‚àÄe2,L2. ‚Üë[0, e2] L2 ‚â° L ‚Üí d1 + e1 ‚â§ e2 ‚Üí
                    ‚Üë[0, e2 - e1] L2 ‚â° L1.
#d1 #e1 #L #L1 #H elim H -H d1 e1 L L1
[ //
| #L #K #I #V #e #_ #IHLK #e2 #L2 #H #He2
  lapply (drop_inv_drop1 ‚Ä¶ H ?) -H /2/ #HL2
  <minus_plus_comm /3/
| #L #K #I #V1 #V2 #d #e #_ #_ #IHLK #e2 #L2 #H #Hdee2
  lapply (transitive_le 1 ‚Ä¶ Hdee2) // #He2
  lapply (drop_inv_drop1 ‚Ä¶ H ?) -H // -He2 #HL2
  lapply (transitive_le (1+e) ‚Ä¶ Hdee2) // #Hee2
  >(plus_minus_m_m (e2-e) 1 ?) [ @drop_drop >minus_minus_comm /3/ | /2/ ]
]
qed.

axiom drop_conf_lt: ‚àÄd1,e1,L,L1. ‚Üë[d1, e1] L1 ‚â° L ‚Üí
                    ‚àÄe2,K2,I,V2. ‚Üë[0, e2] K2. ùïì{I} V2 ‚â° L ‚Üí
                    e2 < d1 ‚Üí let d ‚âù d1 - e2 - 1 in
                    ‚àÉ‚àÉK1,V1. ‚Üë[0, e2] K1. ùïì{I} V1 ‚â° L1 & 
                             ‚Üë[d, e1] K1 ‚â° K2 & ‚Üë[d,e1] V1 ‚â° V2.

axiom drop_trans_le: ‚àÄd1,e1,L1. ‚àÄL:lenv. ‚Üë[d1, e1] L ‚â° L1 ‚Üí
                     ‚àÄe2,L2. ‚Üë[0, e2] L2 ‚â° L ‚Üí e2 ‚â§ d1 ‚Üí
                     ‚àÉ‚àÉL0. ‚Üë[0, e2] L0 ‚â° L1 & ‚Üë[d1 - e2, e1] L2 ‚â° L0.

axiom drop_trans_ge: ‚àÄd1,e1,L1,L. ‚Üë[d1, e1] L ‚â° L1 ‚Üí
                     ‚àÄe2,L2. ‚Üë[0, e2] L2 ‚â° L ‚Üí d1 ‚â§ e2 ‚Üí ‚Üë[0, e1 + e2] L2 ‚â° L1.
